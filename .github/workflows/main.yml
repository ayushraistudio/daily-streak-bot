name: Super Streak Bot (Manual Control)

on:
  schedule:
    # Schedule wahi purana wala (Automatic)
    - cron: '30 6,14,16,18 * * *'
  
  # Yahan humne NAYA feature add kiya hai dropdown menu ka
  workflow_dispatch:
    inputs:
      force_mode:
        description: 'Manual Mode Select Karo'
        required: true
        default: 'auto'
        type: choice
        options:
        - auto
        - blast_30
        - cleanup

permissions:
  contents: write

jobs:
  super-commit:
    runs-on: ubuntu-latest
    
    steps:
      - name: ðŸ“¥ Checkout Repository
        uses: actions/checkout@v3

      - name: âš™ï¸ Configure Git
        env:
          USER_EMAIL: ${{ secrets.USER_EMAIL }}
          USER_NAME: ${{ github.repository_owner }}
        run: |
          git config --global user.name "$USER_NAME"
          git config --global user.email "$USER_EMAIL"

      - name: ðŸš€ Run Logic
        env:
          # Manual input ko read kar rahe hain
          MANUAL_MODE: ${{ inputs.force_mode }}
        run: |
          current_hour=$(date -u +%H)
          echo "Current UTC Hour: $current_hour"
          echo "Selected Mode: $MANUAL_MODE"

          # Logic: Agar Time 14 (8PM) hai -OR- Tumne manually 'blast_30' select kiya
          if [ "$current_hour" -eq "14" ] || [ "$MANUAL_MODE" == "blast_30" ]; then
            
            echo "ðŸ”¥ Blast Mode Activated: Generating 30 commits..."
            for i in {1..30}
            do
              echo "Commit number $i at $(date)" >> activity_log.txt
              git add activity_log.txt
              git commit -m "chore(bot): rapid fire commit $i ðŸš€"
            done
            
          # Logic: Agar Time 16 (10PM) hai -OR- Tumne manually 'cleanup' select kiya
          elif [ "$current_hour" -eq "16" ] || [ "$MANUAL_MODE" == "cleanup" ]; then
            
            echo "ðŸ§¹ Cleanup Mode Activated..."
            echo "Log reset at $(date)" > activity_log.txt
            git add activity_log.txt
            git commit -m "chore(cleanup): cleaning up daily logs ðŸ§¹"

          else
            # Normal Routine
            echo "âœ… Normal Update Mode"
            echo "Routine check: $(date)" >> activity_log.txt
            git add activity_log.txt
            git commit -m "chore(bot): routine update ðŸŸ¢"
          fi

      - name: ðŸ“¤ Push Changes
        run: git push
        
