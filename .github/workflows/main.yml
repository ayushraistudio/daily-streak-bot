name: Super Streak Bot

on:
  schedule:
    # UTC Times for IST Conversion:
    # 06:30 UTC = 12:00 PM IST (Normal)
    # 14:30 UTC = 08:00 PM IST (30 Commits Blast)
    # 16:30 UTC = 10:00 PM IST (Cleanup)
    # 18:30 UTC = 12:00 AM IST (Normal)
    - cron: '30 6,14,16,18 * * *'
  
  workflow_dispatch:

permissions:
  contents: write

jobs:
  super-commit:
    runs-on: ubuntu-latest
    
    steps:
      - name: ðŸ“¥ Checkout Repository
        uses: actions/checkout@v3

      - name: âš™ï¸ Configure Git
        env:
          USER_EMAIL: ${{ secrets.USER_EMAIL }}
          USER_NAME: ${{ github.repository_owner }}
        run: |
          git config --global user.name "$USER_NAME"
          git config --global user.email "$USER_EMAIL"

      - name: ðŸš€ Run Logic Based on Time
        run: |
          # Current Hour (UTC) nikal rahe hain logic decide karne ke liye
          current_hour=$(date -u +%H)
          
          echo "Current UTC Hour: $current_hour"

          if [ "$current_hour" -eq "14" ]; then
            # --- 8 PM IST Logic (30 Commits) ---
            echo "ðŸ”¥ 8 PM Blast Mode: Generating 30 commits..."
            for i in {1..30}
            do
              echo "Commit number $i at $(date)" >> activity_log.txt
              git add activity_log.txt
              git commit -m "chore(bot): rapid fire commit $i ðŸš€"
            done
            
          elif [ "$current_hour" -eq "16" ]; then
            # --- 10 PM IST Logic (Cleanup) ---
            echo "ðŸ§¹ 10 PM Cleanup Mode: Resetting file..."
            echo "Log reset at $(date)" > activity_log.txt
            git add activity_log.txt
            git commit -m "chore(cleanup): cleaning up daily logs ðŸ§¹"

          else
            # --- Normal Logic (12 PM & 12 AM) ---
            echo "âœ… Normal Update Mode"
            echo "Routine check: $(date)" >> activity_log.txt
            git add activity_log.txt
            git commit -m "chore(bot): routine update ðŸŸ¢"
          fi

      - name: ðŸ“¤ Push Changes
        run: git push
        
